<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Discovery Coach - CDM Coaching Assistant</title>
        <link rel="stylesheet" href="styles.css">
    </head>

    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸ¯ Discovery Coach</h1>
                <p>CDM Epic & Feature Coaching Assistant with Knowledgebase</p>
            </div>

            <div class="main-content">
                <div class="sidebar">
                    <div class="sidebar-section">
                        <div class="sidebar-title">Actions</div>

                        <!-- Strategic Initiative Actions -->
                        <div id="strategicInitiativeActions" class="action-content" style="display: none;">
                            <!-- Active Strategic Initiative Context -->
                            <div id="activeStrategicInitiative" class="active-context-inline" style="display: none;">
                                <div class="active-context-title-inline">ğŸ¯ Active Strategic Initiative</div>
                                <div class="active-context-content-inline" id="strategicInitiativeContent"></div>
                                <button class="sidebar-button" onclick="openTemplateEditor('strategic-initiative')"
                                    title="Edit Strategic Initiative fields in a form"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">âœï¸
                                    Edit Fields</button>
                                <button class="sidebar-button" onclick="updateActiveTemplate('strategic-initiative')"
                                    title="Update the active Strategic Initiative template with refinements from recent conversation"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #10b981 0%, #059669 100%);">ğŸ’¾
                                    Update Template</button>
                            </div>

                            <button class="sidebar-button" onclick="showSummary()"
                                title="Generate a concise summary of the current Strategic Initiative from your conversation">ğŸ“Š
                                Show
                                Summary</button>
                            <button class="sidebar-button" onclick="draftStrategicInitiative()"
                                title="Create a complete Strategic Initiative document from your conversation">âœï¸ Draft
                                Initiative</button>
                            <button class="sidebar-button" onclick="fillStrategicInitiativeTemplate()"
                                title="Fill the complete Strategic Initiative template (13 sections) ready to save to database">ğŸ“‹
                                Fill
                                Template</button>
                            <button class="sidebar-button" onclick="evaluateStrategicInitiative()"
                                title="Analyze your Strategic Initiative against best practices and get feedback">ğŸ”
                                Evaluate
                                Initiative</button>
                            <button class="sidebar-button" onclick="outlineStrategicInitiative()"
                                title="Display the current active Strategic Initiative in structured format">ğŸ“„ Outline
                                Initiative</button>

                            <div style="border-top: 1px solid #e0e0e0; margin: 10px 0; padding-top: 10px;">
                                <button class="sidebar-button" onclick="newStrategicInitiative()"
                                    title="Clear current Strategic Initiative and start a fresh discovery session">ğŸ”„
                                    New
                                    Initiative</button>
                                <button class="sidebar-button" onclick="clearAll()"
                                    title="Clear all conversation history and active contexts">ğŸ—‘ï¸ Clear All</button>
                            </div>
                        </div>

                        <!-- Epic Actions -->
                        <div id="epicActions" class="action-content">
                            <!-- Active Epic Context -->
                            <div id="activeEpic" class="active-context-inline" style="display: none;">
                                <div class="active-context-title-inline">ğŸ“ Active Epic</div>
                                <div class="active-context-content-inline" id="epicContent"></div> <button
                                    class="sidebar-button" onclick="openTemplateEditor('epic')"
                                    title="Edit Epic fields in a form"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">âœï¸
                                    Edit Fields</button> <button class="sidebar-button"
                                    onclick="updateActiveTemplate('epic')"
                                    title="Update the active Epic template with refinements from recent conversation"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #10b981 0%, #059669 100%);">ğŸ’¾
                                    Update Template</button>
                            </div>

                            <button class="sidebar-button" onclick="showSummary()"
                                title="Generate a concise summary of the current Epic from your conversation">ğŸ“Š Show
                                Summary</button>
                            <button class="sidebar-button" onclick="draftEpic()"
                                title="Create a complete Epic document in SAFe format from your conversation">âœï¸ Draft
                                Epic</button>
                            <button class="sidebar-button" onclick="fillEpicTemplate()"
                                title="Fill the complete Epic template (19 sections) ready to save to database">ğŸ“‹ Fill
                                Template</button>
                            <button class="sidebar-button" onclick="evaluateEpic()"
                                title="Analyze your Epic against SAFe best practices and get feedback">ğŸ” Evaluate
                                Epic</button>
                            <button class="sidebar-button" onclick="outlineEpic()"
                                title="Display the current active Epic in structured format">ğŸ“„ Outline Epic</button>

                            <div style="border-top: 1px solid #e0e0e0; margin: 10px 0; padding-top: 10px;">
                                <button class="sidebar-button" onclick="newEpic()"
                                    title="Clear current Epic and start a fresh discovery session">ğŸ”„ New Epic</button>
                                <button class="sidebar-button" onclick="clearAll()"
                                    title="Clear all conversation history and active contexts">ğŸ—‘ï¸ Clear All</button>
                            </div>
                        </div>

                        <!-- Feature Actions -->
                        <div id="featureActions" class="action-content" style="display: none;">
                            <!-- Active Feature Context -->
                            <div id="activeFeature" class="active-context-inline" style="display: none;">
                                <div class="active-context-title-inline">âœ¨ Active Feature</div>
                                <div class="active-context-content-inline" id="featureContent"></div> <button
                                    class="sidebar-button" onclick="openTemplateEditor('feature')"
                                    title="Edit Feature fields in a form"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">âœï¸
                                    Edit Fields</button> <button class="sidebar-button"
                                    onclick="updateActiveTemplate('feature')"
                                    title="Update the active Feature template with refinements from recent conversation"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #10b981 0%, #059669 100%);">ğŸ’¾
                                    Update Template</button>
                            </div>

                            <button class="sidebar-button" onclick="decomposeEpicToFeatures()"
                                title="Break down the active Epic into smaller Features"
                                style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white;">ğŸ”§
                                Decompose Epic</button>
                            <button class="sidebar-button" onclick="showSummary()"
                                title="Generate a concise summary of the current Feature from your conversation">ğŸ“Š Show
                                Summary</button>
                            <button class="sidebar-button" onclick="draftFeature()"
                                title="Create a complete Feature document in SAFe format from your conversation">âœï¸
                                Draft Feature</button>
                            <button class="sidebar-button" onclick="fillFeatureTemplate()"
                                title="Fill the complete Feature template (10 sections) ready to save to database">ğŸ“‹
                                Fill Template</button>
                            <button class="sidebar-button" onclick="evaluateFeature()"
                                title="Analyze your Feature against SAFe best practices and get feedback">ğŸ” Evaluate
                                Feature</button>
                            <button class="sidebar-button" onclick="outlineFeature()"
                                title="Display the current active Feature in structured format">ğŸ“„ Outline
                                Feature</button>

                            <div style="border-top: 1px solid #e0e0e0; margin: 10px 0; padding-top: 10px;">
                                <button class="sidebar-button" onclick="saveAllProposedFeatures()"
                                    title="Extract and save all proposed Features from the conversation to the active Epic"
                                    style="background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); color: white;">ğŸ’¾
                                    Save All
                                    Features to Epic</button>
                                <button class="sidebar-button" onclick="newFeature()"
                                    title="Clear current Feature and start a fresh discovery session">ğŸ”„ New
                                    Feature</button>
                                <button class="sidebar-button" onclick="clearAll()"
                                    title="Clear all conversation history and active contexts">ğŸ—‘ï¸ Clear All</button>
                            </div>
                        </div>

                        <!-- User Story Actions -->
                        <div id="storyActions" class="action-content" style="display: none;">
                            <!-- Active Story Context -->
                            <div id="activeStory" class="active-context-inline" style="display: none;">
                                <div class="active-context-title-inline">ğŸ“– Active User Story</div>
                                <div class="active-context-content-inline" id="storyContent"></div>
                                <button class="sidebar-button" onclick="openTemplateEditor('story')"
                                    title="Edit User Story fields in a form"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">âœï¸
                                    Edit Fields</button>
                                <button class="sidebar-button" onclick="updateActiveTemplate('story')"
                                    title="Update the active User Story template with refinements from recent conversation"
                                    style="margin-top: 10px; background: linear-gradient(135deg, #10b981 0%, #059669 100%);">ğŸ’¾
                                    Update Template</button>
                            </div>

                            <button class="sidebar-button" onclick="decomposeFeatureToStories()"
                                title="Break down the active Feature into smaller User Stories"
                                style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white;">ğŸ”§
                                Decompose
                                Feature</button>
                            <button class="sidebar-button" onclick="draftStory()"
                                title="Create a complete User Story from your conversation">âœï¸ Draft Story</button>
                            <button class="sidebar-button" onclick="fillStoryTemplate()"
                                title="Fill the complete User Story template ready to save to database">ğŸ“‹ Fill
                                Template</button>
                            <button class="sidebar-button" onclick="evaluateStory()"
                                title="Analyze your User Story against Agile best practices and get feedback">ğŸ”
                                Evaluate Story</button>
                            <button class="sidebar-button" onclick="outlineStory()"
                                title="Display the current active User Story in structured format">ğŸ“„ Outline
                                Story</button>

                            <div style="border-top: 1px solid #e0e0e0; margin: 10px 0; padding-top: 10px;">
                                <button class="sidebar-button" onclick="saveAllProposedStories()"
                                    title="Extract and save all proposed User Stories from the conversation to the active Feature"
                                    style="background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); color: white;">ğŸ’¾
                                    Save All
                                    Stories to Feature</button>
                                <button class="sidebar-button" onclick="newStory()"
                                    title="Clear current User Story and start a fresh discovery session">ğŸ”„ New
                                    Story</button>
                                <button class="sidebar-button" onclick="clearAll()"
                                    title="Clear all conversation history and active contexts">ğŸ—‘ï¸ Clear All</button>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-section">
                        <div class="sidebar-title">Templates</div>
                        <button class="sidebar-button" onclick="saveTemplateToDb()"
                            title="Save the filled Epic or Feature template to database for later use">ğŸ’¾ Save
                            Template</button>
                        <button class="sidebar-button" onclick="listTemplates()"
                            title="Browse, load, or delete saved Epic and Feature templates">ğŸ“‹ Browse
                            Templates</button>
                        <button class="sidebar-button" onclick="exportTemplateAsJson()"
                            title="Export the current template as a JSON file for external use">ğŸ“¤ Export JSON</button>
                        <button class="sidebar-button" onclick="showHelp()" title="Show help and documentation">â“
                            Help</button>
                    </div>
                </div>

                <div class="chat-area">
                    <!-- Main Tabs -->
                    <div class="main-tabs">
                        <button class="main-tab active" onclick="switchMainTab('strategic-initiatives')"
                            id="strategicInitiativesTab">ğŸ¯ Strategic Initiatives</button>
                        <button class="main-tab" onclick="switchMainTab('epics')" id="epicsTab">ğŸ“ Epic</button>
                        <button class="main-tab" onclick="switchMainTab('features')" id="featuresTab">âœ¨ Feature</button>
                        <button class="main-tab" onclick="switchMainTab('stories')" id="storiesTab">ğŸ“– User
                            Story</button>
                        <button class="main-tab" onclick="switchMainTab('pi-objectives')" id="piObjectivesTab">ğŸ“Š PI
                            Objectives</button>
                        <button class="main-tab" onclick="switchMainTab('admin')" id="adminTab">âš™ï¸ Admin</button>
                    </div>

                    <!-- Strategic Initiatives Content -->
                    <div id="strategicInitiativesContent" class="main-tab-content">
                        <div class="messages" id="messagesStrategicInitiatives"></div>
                        <div class="status-bar" id="statusStrategicInitiatives">Ready to coach</div>
                        <div class="input-area">
                            <form class="input-form" onsubmit="sendMessage(event)">
                                <input type="text" class="input-field" id="messageInputStrategicInitiatives"
                                    placeholder="Ask your coaching question..." autocomplete="off">
                                <button type="submit" class="send-button" id="sendBtnStrategicInitiatives">Send</button>
                            </form>
                        </div>
                    </div>

                    <!-- PI Objectives Content -->
                    <div id="piObjectivesContent" class="main-tab-content" style="display: none;">
                        <div class="messages" id="messagesPIObjectives"></div>
                        <div class="status-bar" id="statusPIObjectives">Ready to coach</div>
                        <div class="input-area">
                            <form class="input-form" onsubmit="sendMessage(event)">
                                <input type="text" class="input-field" id="messageInputPIObjectives"
                                    placeholder="Ask your coaching question..." autocomplete="off">
                                <button type="submit" class="send-button" id="sendBtnPIObjectives">Send</button>
                            </form>
                        </div>
                    </div>

                    <!-- Epics Content -->
                    <div id="epicsContent" class="main-tab-content" style="display: none;">
                        <div class="messages" id="messages"></div>
                        <div class="status-bar" id="status">Ready to coach</div>
                        <div class="input-area">
                            <form class="input-form" onsubmit="sendMessage(event)">
                                <input type="text" class="input-field" id="messageInput"
                                    placeholder="Ask your coaching question..." autocomplete="off">
                                <button type="submit" class="send-button" id="sendBtn">Send</button>
                            </form>
                        </div>
                    </div>

                    <!-- Features Content -->
                    <div id="featuresContent" class="main-tab-content" style="display: none;">
                        <div class="messages" id="messagesFeatures"></div>
                        <div class="status-bar" id="statusFeatures">Ready to coach</div>
                        <div class="input-area">
                            <form class="input-form" onsubmit="sendMessage(event)">
                                <input type="text" class="input-field" id="messageInputFeatures"
                                    placeholder="Ask your coaching question..." autocomplete="off">
                                <button type="submit" class="send-button" id="sendBtnFeatures">Send</button>
                            </form>
                        </div>
                    </div>

                    <!-- Stories Content -->
                    <div id="storiesContent" class="main-tab-content" style="display: none;">
                        <div class="messages" id="messagesStories"></div>
                        <div class="status-bar" id="statusStories">Ready to coach</div>
                        <div class="input-area">
                            <form class="input-form" onsubmit="sendMessage(event)">
                                <input type="text" class="input-field" id="messageInputStories"
                                    placeholder="Ask your coaching question..." autocomplete="off">
                                <button type="submit" class="send-button" id="sendBtnStories">Send</button>
                            </form>
                        </div>
                    </div>

                    <!-- Admin Content -->
                    <div id="adminContent" class="main-tab-content" style="display: none;">
                        <div class="admin-panel">
                            <div class="admin-section">
                                <h3>Sessions</h3>
                                <button class="sidebar-button" onclick="saveSession()"
                                    title="Save current conversation, Epic, and Feature to a session file">ğŸ’¾ Save
                                    Session</button>
                                <button class="sidebar-button" onclick="loadSession()"
                                    title="Load a previously saved session to continue working">ğŸ“‚ Load Session</button>
                                <button class="sidebar-button" onclick="deleteSession()"
                                    title="Delete saved session files">ğŸ—‘ï¸
                                    Delete Session</button>
                            </div>

                            <div class="admin-section">
                                <h3>Model Settings</h3>
                                <!-- Provider Selection -->
                                <div style="margin-bottom: 15px;">
                                    <label style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">LLM
                                        Provider</label>
                                    <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                                        <label
                                            style="display: flex; align-items: center; cursor: pointer; font-size: 13px;">
                                            <input type="radio" name="provider" value="openai"
                                                onchange="updateProviderSettings()" style="margin-right: 5px;">
                                            <span>â˜ï¸ External (OpenAI)</span>
                                        </label>
                                        <label
                                            style="display: flex; align-items: center; cursor: pointer; font-size: 13px;">
                                            <input type="radio" name="provider" value="ollama" checked
                                                onchange="updateProviderSettings()" style="margin-right: 5px;">
                                            <span>ğŸ  Local (Ollama)</span>
                                        </label>
                                    </div>
                                    <div id="ollamaStatus"
                                        style="display: none; font-size: 11px; padding: 5px; border-radius: 3px; margin-top: 5px;">
                                    </div>
                                </div>

                                <!-- Model Selection -->
                                <div style="margin-bottom: 10px;">
                                    <label
                                        style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Model</label>
                                    <select id="modelSelect" class="sidebar-input" onchange="updateModelSettings()">
                                        <!-- Ollama models (default - will be loaded on page load) -->
                                        <option value="">Loading Ollama models...</option>
                                    </select>
                                </div>

                                <!-- Temperature -->
                                <div>
                                    <label
                                        style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Temperature:
                                        <span id="tempValue">0.7</span></label>
                                    <input type="range" id="temperatureSlider" class="sidebar-slider" min="0" max="2"
                                        step="0.1" value="0.7" oninput="updateTemperature()">
                                </div>
                            </div>

                            <div class="admin-section">
                                <h3>ğŸ“ Prompt Management</h3>
                                <div style="margin-bottom: 10px;">
                                    <label
                                        style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Select
                                        Prompt File</label>
                                    <select id="promptFileSelect" class="sidebar-input" onchange="loadPromptFile()">
                                        <option value="">Select a prompt file...</option>
                                    </select>
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <label
                                        style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Select
                                        Version</label>
                                    <select id="promptVersionSelect" class="sidebar-input"
                                        onchange="loadPromptVersion()">
                                        <option value="current">Current (Active)</option>
                                    </select>
                                </div>
                                <button class="sidebar-button" onclick="openPromptEditor()">âœï¸ Edit Prompt</button>
                                <button class="sidebar-button" onclick="createPromptVersion()">ğŸ’¾ Save as
                                    Version</button>
                                <button class="sidebar-button" onclick="activatePromptVersion()">âœ… Set as
                                    Active</button>
                                <button class="sidebar-button" onclick="deletePromptVersion()">ğŸ—‘ï¸ Delete
                                    Version</button>
                            </div>

                            <div class="admin-section">
                                <h3>ğŸ“Š Monitoring & Metrics</h3>
                                <div style="margin-bottom: 10px;">
                                    <label
                                        style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Days
                                        to Show</label>
                                    <select id="metricsDays" class="sidebar-input" style="margin-bottom: 10px;">
                                        <option value="1">Today</option>
                                        <option value="7" selected>Last 7 Days</option>
                                        <option value="30">Last 30 Days</option>
                                    </select>
                                </div>
                                <button class="sidebar-button" onclick="loadMetricsReport()">ğŸ“ˆ View Daily
                                    Report</button>
                                <button class="sidebar-button" onclick="loadMetricsStats()">ğŸ“Š View Statistics</button>
                                <button class="sidebar-button" onclick="loadRecentConversations()">ğŸ’¬ Recent
                                    Conversations</button>
                                <button class="sidebar-button" onclick="loadRecentErrors()">âš ï¸ Recent Errors</button>
                                <div id="metricsDisplay"
                                    style="margin-top: 15px; padding: 10px; background: #f5f5f5; border-radius: 4px; font-family: monospace; font-size: 11px; max-height: 400px; overflow-y: auto; display: none; white-space: pre-wrap;">
                                </div>
                            </div>

                            <div class="admin-section">
                                <h3>â“ Help & Documentation</h3>
                                <p style="font-size: 12px; color: #666; margin-bottom: 10px;">Manage the help
                                    documentation that appears when users click the Help button.</p>
                                <button class="sidebar-button" onclick="showHelp()">ğŸ‘ï¸ View Help</button>
                                <button class="sidebar-button" onclick="openHelpEditor()">âœï¸ Edit Help</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="help-modal" id="helpModal">
            <div class="help-content">
                <button class="help-close" onclick="closeHelp()">Ã—</button>
                <h2>Discovery Coach - Help</h2>

                <h3>Commands</h3>
                <div class="command-list">
                    <p><strong>outline epic</strong> - Display current epic</p>
                    <p><strong>outline feature</strong> - Display current feature</p>
                    <p><strong>new epic</strong> - Clear epic context</p>
                    <p><strong>new feature</strong> - Clear feature context</p>
                    <p><strong>help</strong> - Show this help</p>
                </div>

                <h3>Workflow</h3>
                <p><strong>1. Load Content:</strong> Use "Evaluate Epic" or "Evaluate Feature" to load from files or
                    provide details in conversation.</p>
                <p><strong>2. View Active:</strong> Click "Outline Epic" or "Outline Feature" to see current content.
                </p>
                <p><strong>3. Ask Questions:</strong> Type coaching questions - active context automatically included.
                </p>
                <p><strong>4. Start Fresh:</strong> Click "New Epic" or "New Feature" to clear context and begin new
                    session.</p>

                <h3>Active Context</h3>
                <p>When you load or create an Epic or Feature, it becomes "active" and is automatically included in all
                    subsequent coaching messages. This means the agent always has context about what you're working on.
                </p>

                <h3>Key Features</h3>
                <ul style="margin-left: 20px; color: #555;">
                    <li>Persistent context across messages</li>
                    <li>RAG-enhanced responses based on knowledge base</li>
                    <li>Structured evaluation of Epics and Features</li>
                    <li>Multi-turn conversation with memory</li>
                    <li>Real-time context display in sidebar</li>
                </ul>

                <h3>Epic Hypothesis Format</h3>
                <p>The agent expects Epic hypothesis statements in this format:</p>
                <code
                    style="display: block; background: #f0f0f0; padding: 10px; border-radius: 4px; margin: 10px 0; font-size: 12px; overflow-x: auto;">
            For &lt;customers&gt;<br>
            who &lt;do something&gt;<br>
            the &lt;solution&gt;<br>
            is a &lt;something â€“ the 'how'&gt;<br>
            that &lt;provides this value&gt;<br>
            unlike &lt;competitor or current solution&gt;<br>
            our solution &lt;does something better&gt;
        </code>

                <h3>Feature Acceptance Criteria</h3>
                <p>Use Gherkin format (Given-When-Then) for acceptance criteria:</p>
                <code
                    style="display: block; background: #f0f0f0; padding: 10px; border-radius: 4px; margin: 10px 0; font-size: 12px; overflow-x: auto;">
            Given &lt;context&gt;<br>
            When &lt;action&gt;<br>
            Then &lt;result&gt;
        </code>
            </div>
        </div>

        <!-- Template Browser Modal -->
        <div id="templateBrowserModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 800px; max-height: 80vh;">
                <div class="modal-header">
                    <h2>ğŸ“‹ Saved Templates</h2>
                    <button class="modal-close" onclick="closeTemplateBrowser()">&times;</button>
                </div>
                <div class="modal-body" style="overflow-y: auto; max-height: calc(80vh - 150px);">
                    <div id="templateBrowserContent"></div>
                </div>
            </div>
        </div>

        <!-- Template Editor Modal -->
        <div id="templateEditorModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 900px; max-height: 90vh;">
                <div class="modal-header">
                    <h2 id="editorModalTitle">âœï¸ Edit Template</h2>
                    <button class="modal-close" onclick="closeTemplateEditor()">&times;</button>
                </div>
                <div class="modal-body" style="overflow-y: auto; max-height: calc(90vh - 200px); padding: 20px;">
                    <div id="templateEditorContent"></div>
                </div>
                <div class="modal-footer" style="padding: 15px; border-top: 1px solid #e0e0e0; text-align: right;">
                    <button onclick="closeTemplateEditor()"
                        style="padding: 10px 20px; margin-right: 10px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
                    <button onclick="saveEditedTemplate()"
                        style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 4px; cursor: pointer;">ğŸ’¾
                        Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Prompt Editor Modal -->
        <div id="promptEditorModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 1000px; max-height: 90vh;">
                <div class="modal-header">
                    <h2 id="promptEditorTitle">âœï¸ Edit Prompt</h2>
                    <button class="modal-close" onclick="closePromptEditor()">&times;</button>
                </div>
                <div class="modal-body" style="overflow-y: auto; max-height: calc(90vh - 200px); padding: 20px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">File: <strong
                                id="promptFileName"></strong></label>
                        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">Version:
                            <strong id="promptVersionLabel">Current (Active)</strong></label>
                    </div>
                    <textarea id="promptContent"
                        style="width: 100%; min-height: 500px; font-family: 'Monaco', 'Menlo', 'Courier New', monospace; font-size: 13px; padding: 12px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;"
                        placeholder="Prompt content will appear here..."></textarea>
                </div>
                <div class="modal-footer" style="padding: 15px; border-top: 1px solid #e0e0e0; text-align: right;">
                    <button onclick="closePromptEditor()"
                        style="padding: 10px 20px; margin-right: 10px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
                    <button onclick="savePromptChanges()"
                        style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 4px; cursor: pointer;">ğŸ’¾
                        Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Help Editor Modal -->
        <div id="helpEditorModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 1000px; max-height: 90vh;">
                <div class="modal-header">
                    <h2>âœï¸ Edit Help Documentation</h2>
                    <button class="modal-close" onclick="closeHelpEditor()">&times;</button>
                </div>
                <div class="modal-body" style="overflow-y: auto; max-height: calc(90vh - 200px); padding: 20px;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; font-size: 12px; color: #666; margin-bottom: 4px;">File:
                            <strong>frontend/help.txt</strong></label>
                        <label style="display: block; font-size: 11px; color: #888; margin-bottom: 10px;">This text
                            appears when users click the Help button on any tab.</label>
                    </div>
                    <textarea id="helpContent"
                        style="width: 100%; min-height: 500px; font-family: 'Monaco', 'Menlo', 'Courier New', monospace; font-size: 13px; padding: 12px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;"
                        placeholder="Help content will appear here..."></textarea>
                </div>
                <div class="modal-footer" style="padding: 15px; border-top: 1px solid #e0e0e0; text-align: right;">
                    <button onclick="closeHelpEditor()"
                        style="padding: 10px 20px; margin-right: 10px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
                    <button onclick="saveHelpChanges()"
                        style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 4px; cursor: pointer;">ğŸ’¾
                        Save Changes</button>
                </div>
            </div>
        </div>

        <script src="script.js"></script>
    </body>

</html>